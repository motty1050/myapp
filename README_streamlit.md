# 都道府県別高齢化率分析アプリ

実際の政府統計データ（住民基本台帳人口移動報告書）を使用した日本の高齢化率の地域差分析Streamlitアプリケーション群です。

## アプリ一覧

### 1. `streamlit_aging_analysis.py` - メイン版
- **機能**: 実データ対応 + サンプルデータ
- **特徴**: 
  - 2015-2024年の複数年データ統合
  - 時系列推移分析
  - 地域間格差分析
  - 詳細統計分析
  - インタラクティブな可視化

### 2. `streamlit_upload_version.py` - アップロード版  
- **機能**: ファイルアップロード対応
- **特徴**:
  - ドラッグ&ドロップでExcelファイルアップロード
  - 複数ファイル同時処理
  - 自動的なデータクリーニング
  - リアルタイムデータ処理状況表示

### 3. `streamlit_simple_analysis.py` - シンプル版
- **機能**: 単一ファイル分析特化
- **特徴**:
  - 列選択式インターフェース
  - データプレビュー機能
  - 基本的な統計分析
  - 軽量で高速動作

## 実行方法

### 基本実行
```bash
cd /home/motty1050/myapp
python -m streamlit run streamlit_aging_analysis.py --server.port 8501 --server.address 0.0.0.0
```

### 他のバージョン実行
```bash
# アップロード版
python -m streamlit run streamlit_upload_version.py --server.port 8502 --server.address 0.0.0.0

# シンプル版  
python -m streamlit run streamlit_simple_analysis.py --server.port 8503 --server.address 0.0.0.0
```

## 対応データファイル

### 実際の政府統計データ
- **ファイル名例**: 
  - `1502stnen.xls` (2015年)
  - `1602stnen.xls` (2016年)
  - `2102stnen.xlsx` (2021年)
  - `24stnen.xlsx` (2024年)
- **データソース**: 総務省統計局 e-Stat
- **形式**: Excel (.xls/.xlsx)

### ファイル配置方法

#### 1. ローカルパス指定（メイン版）
```
C:/Users/notar/Downloads/1502stnen.xls
C:/Users/notar/Downloads/1602stnen.xls
...
```

#### 2. ファイルアップロード（アップロード版・シンプル版）
- Webインターフェースから直接アップロード
- 複数ファイル同時選択可能

## 機能詳細

### データ分析機能
- **時系列推移**: 都道府県別・地域別の高齢化率推移
- **地域比較**: 箱ひげ図、ヒートマップによる地域間格差分析  
- **ランキング**: 高齢化率上位・下位都道府県
- **詳細統計**: 変化率分析、統計サマリー

### 可視化機能
- **インタラクティブグラフ**: Plotlyを使用した動的可視化
- **フィルタリング**: 年範囲、都道府県、地域での絞り込み
- **カスタムビュー**: ユーザー選択に応じた表示切り替え

### データ処理機能
- **自動クリーニング**: 不正データの除去と標準化
- **地域分類**: 47都道府県の8地域自動分類
- **CSV出力**: フィルター済みデータのダウンロード

## アクセス方法

### ローカル環境
- **メイン版**: http://localhost:8501
- **アップロード版**: http://localhost:8502  
- **シンプル版**: http://localhost:8503

### ネットワーク環境
`--server.address 0.0.0.0` オプションにより、同じネットワーク内の他デバイスからもアクセス可能

## 技術仕様

### 使用ライブラリ
- **Streamlit**: Webアプリケーションフレームワーク
- **Pandas**: データ処理・分析
- **Plotly**: インタラクティブ可視化
- **NumPy**: 数値計算

### データ形式
- **入力**: Excel (.xls/.xlsx)
- **出力**: CSV, PNG (グラフ)
- **中間処理**: DataFrame (Pandas)

## 開発情報

### プロジェクト構成
```
myapp/
├── streamlit_aging_analysis.py      # メイン分析アプリ
├── streamlit_upload_version.py      # アップロード対応版  
├── streamlit_simple_analysis.py     # シンプル分析版
├── backend/                         # Django REST API
├── frontend/                        # React アプリ
└── README_streamlit.md             # このファイル
```

### 拡張性
- 新しい年度データの追加対応
- 他の人口統計データへの対応
- 地域分類のカスタマイズ
- 新しい分析手法の追加

## 注意事項

### ファイルパス
- Windows環境のパスをLinux/WSL環境で動作させるため、パス変換処理を実装
- 実際の環境に応じてファイルパスを調整してください

### データ品質
- 政府統計データの年度によりフォーマットが異なる場合があります
- データクリーニング機能により自動対応しますが、手動調整が必要な場合があります

### パフォーマンス  
- 大量データ処理時は`@st.cache_data`により高速化
- 複数年データ統合時はメモリ使用量にご注意ください

## サポート・問い合わせ

このアプリケーションは CUDA画像分類システムの拡張機能として開発されました。
技術的な質問や改善提案がありましたら、開発チームまでお知らせください。

---
**更新**: 2024年 - 実データ対応版
**開発**: CUDA画像分類システム開発チーム
